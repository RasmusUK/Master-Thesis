<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>C:\Git\Master-Thesis\EventSourcingFramework\src\EventSourcingFramework.Infrastructure.Shared\Models\Events\MongoEventBase.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using EventSourcingFramework.Core.Models.Events;
using MongoDB.Bson.Serialization.Attributes;

namespace EventSourcingFramework.Infrastructure.Shared.Models.Events;

public abstract record MongoEventBase(Guid EntityId) : IEvent
{
    [BsonId] public Guid Id { get; init; } = Guid.NewGuid();

    public DateTime Timestamp { get; init; } = DateTime.UtcNow;
    public Guid? TransactionId { get; init; }
    public long EventNumber { get; set; }
    public bool Compensation { get; init; }

    [BsonIgnore]
    public string Typename =&gt;
        GetType().IsGenericType
            ? $&quot;{GetType().Name.Replace(&quot;Mongo&quot;, &quot;&quot;).Split(&#39;`&#39;)[0]}&lt;{string.Join(&quot;, &quot;, GetType().GetGenericArguments().Select(t =&gt; t.Name))}&gt;&quot;
            : GetType().Name;
}
    </pre>
    <script type="text/javascript">
      highlightRanges([[6,24,6,53,1],[6,24,6,38,0],[6,39,6,52,1],[6,39,6,52,1],[8,31,8,35,1],[8,36,8,41,1],[8,46,8,60,1],[10,33,10,37,1],[10,38,10,43,1],[10,48,10,63,1],[11,34,11,38,1],[11,39,11,44,1],[12,31,12,35,1],[12,36,12,40,1],[13,32,13,36,1],[13,37,13,42,1],[17,9,18,132,0],[18,132,18,138,0],[18,138,19,29,0]]);
    </script>
  </body>
</html>